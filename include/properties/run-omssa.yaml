group: OMSSA/1. Run

title: Run OMSSA

type: processor

description: >
  This script runs OMSSA on a given set of spectral files and databases. 
  If desired, a target-decoy approach can be used.

input:
  - key: spectra
    label: spectra
    formats: [dta, mgf, xml-mzdata, xml-mzdata-compressed, xml-mzxml, xml-mzxml-compressed, xml-mzml, xml-mzml-compressed]
    min: 1
  - key: databases
    label: database
    formats: [fasta]
    min: 1
    
proposePrefix:
  - spectra

defaultOutputDirectory: spectra
    
output:
  - key: resultFile
    label: OMSSA results
    format: csv
    filename: omssa-results.csv
    default: yes

parameters:
  - key: doTargetDecoy
    group: '{1}Target/decoy search'
    label: Perform target-decoy search
    type: flag
    default: true
  - key: targetDecoyMethod
    group: '{1}Target/decoy search'
    label: Target-decoy method
    type: enum
    choices: [{'shuffle': 'shuffle protein'}, {'reverse': 'reverse protein'}, {'shuffle-peptide': 'shuffle peptide'}]
    default: 'shuffle-peptide'
    description: Specify how decoys should be created.
    enabled: doTargetDecoy
  - key: targetDecoyKeepStart
    group: '{1}Target/decoy search'
    label: Decoy keep start
    type: int
    default: 0
    min: 0
    description: Specify how many amino acids from the start of a sequence should be left untouched when creating a decoy entry.
    enabled: doTargetDecoy
  - key: targetDecoyKeepEnd
    group: '{1}Target/decoy search'
    label: Decoy keep end
    type: int
    default: 1
    min: 0
    description: Specify how many amino acids from the end of a sequence should be left untouched when creating a decoy entry.
    enabled: doTargetDecoy
  - key: batchSize
    group: Tweaks
    label: Spectrum batch size
    type: int
    default: 2000
    min: 1
    
externalParameters: 
  - omssa.omssacl

needs:
  - ext.omssa
  - ext.blast
  - ext.simquant

filetracker:
  - dontMd5InputFiles: [spectra]
