group: OMSSA

title: Run OMSSA

type: processor

description: >
  This script runs OMSSA on a given set of spectra files and databases. 
  A target-decoy approach is used.

input:
  - key: spectra
    label: spectra
    formats: [dta, mgf, xml-mzdata, xml-mzdata-compressed, xml-mzxml, xml-mzxml-compressed, xml-mzml, xml-mzml-compressed]
    min: 1
  - key: databases
    label: database
    formats: [fasta-proteins]
    min: 1

defaultOutputDirectory: spectra
    
output:
  - key: resultFile
    label: OMSSA result file
    format: csv
    filename: omssa-results.csv
    default: yes

parameters:
  - key: doTargetDecoy
    group: Sequence library
    label: Perform target-decoy search
    type: flag
    default: true
  - key: targetDecoyMethod
    group: Sequence library
    label: Target-decoy method
    type: enum
    choices: ['shuffle', 'reverse']
    default: shuffle
    description: Specify how decoys should be created.
    enabled: doTargetDecoy
  - key: targetDecoyKeepStart
    group: Sequence library
    label: Decoy keep start
    type: int
    default: 1
    min: 0
    description: Specify how many amino acids from the start of a sequence should be left untouched when creating a decoy entry.
    enabled: doTargetDecoy
  - key: targetDecoyKeepEnd
    group: Sequence library
    label: Decoy keep end
    type: int
    default: 1
    min: 0
    description: Specify how many amino acids from the end of a sequence should be left untouched when creating a decoy entry.
    enabled: doTargetDecoy
  - key: batchSize
    group: Tweaks
    label: Spectrum batch size
    type: int
    default: 2000
    min: 1
    
externalParameters: 
  - omssa.omssacl

needs:
  - ext.omssa
  - ext.blast
  - ext.simquant
