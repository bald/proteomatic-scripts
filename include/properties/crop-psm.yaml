group: OMSSA

title: Crop peptide-spectral matches

description: >
  Crop peptide-spectral matches resulting from a target-decoy search at a certain target false positive rate.

type: processor

input:
  - key: omssaResults
    label: OMSSA results
    formats: [csv]
    min: 1

defaultOutputDirectory: omssaResults

output:
  - key: croppedPsm
    label: cropped results
    format: csv
    filename: psm-cropped.csv
    default: yes

parameters:
  - key: scoreThresholdType
    type: enum
    choices: ['off', 'min', 'max', 'fpr']
    default: 'fpr'
  - key: targetFpr # only for scoreThresholdType 'fpr'
    enable: "#{scoreThresholdType} == 'fpr'"
    label: Target FPR
    type: float
    default: 0.1
    suffix: '%'
    min: 0.0
    max: 100.0
    step: 0.1    
  - key: scoreThresholdScope # only for scoreThresholdType 'fpr'
    enable: "#{scoreThresholdType} == 'fpr'"
    label: Score threshold scope
    type: enum
    choices: [global, spot]
    default: global
  - key: scoreThreshold # only for scoreThresholdType 'min' and 'max'
    enable: "#{scoreThresholdType} == 'min' || #{scoreThresholdType} == 'max'"
    label: Score threshold
    type: float
    default: 1.0
  - key: maxPpm
    label: max mass error
    suffix: ppm
    type: float
    min: 0.0
    max: 1000000.0
    step: 1.0
    default: 1000000.0
