group: Proteomics/Quantitation/qTrace/1. Run

title: Run qTrace

description: >
   Perform petide quantitation on MS1 full or SIM scans. All peptides that
   are to be quantified must be specified either via the peptides parameter
   or via text or PSM list files. By default, peptides that are specified
   via PSM list files are only searched for in those spectra files which the
   peptides have been identified in.

type: processor

input:
  - key: spectraFiles
    label: spectra
    formats: [xml-mzdata, xml-mzdata-compressed, xml-mzxml, xml-mzxml-compressed, xml-mzml, xml-mzml-compressed]
    min: 1
  - key: psmFile
    label: PSM list
    formats: [csv]
  - key: peptideFiles
    label: peptide
    formats: [txt]

defaultOutputDirectory: spectraFiles

output:
  - key: qtraceCsv
    label: quantitation results
    format: csv
    filename: qtrace-results.csv
    default: yes
  - key: xhtmlReport
    label: XHTML results
    format: xhtml
    filename: qtrace-results.xhtml
    default: no

parameters:
  - key: peptides
    type: string
    label: Peptides
    description: Multiple peptides can be separated by spaces or commas.
    default: ''
  - key: excludeAminoAcids
    type: string
    default: ''
    label: Exclude amino acids
    description: "If you have reason to believe that certain amino acids will lead to problems during quantitation, please enter them here in single letter code. All peptides containing one of these amino acids will be ignored."
  - key: label
    label: Label
    type: string
    default: "15N (0.99)"
    description: Describe the label here.
    examples: 
      - "15N (0.99)"
      - "R 13C"
      - "RK 13C 15N"
  - key: scanType
    label: Scans to analyze
    type: enum
    choices: [{sim: SIM scans only}, {all: All MS1 scans}, {full: Full scans only}]
    default: 'all'
  - key: minCharge
    label: Minimum charge
    type: int
    default: 2
    min: 1
  - key: maxCharge
    label: Maximum charge
    type: int
    default: 3
    min: 1
  - key: minSnr
    label: Minimum SNR
    type: float
    default: 2.0
    min: 0.0
    step: 0.1
  - key: massAccuracy
    label: Mass accuracy
    type: float
    suffix: ppm
    default: 5.0
    min: 0.0
    step: 0.1
    description: Specify how accurately the Gauss fitted peaks must match to the target m/z values of the peptides. That is, enter the mass accuracy of your MS here.
  - key: searchAllInAll
    label: Search for all peptides in all spectra files
    type: flag
    default: false
    description: Try to quantify all peptides in all spectra files, even if peptides have not been identified in some spectra files.

needs:
  - ext.qtrace

filetracker:
  - dontMd5InputFiles: [spectraFiles]
