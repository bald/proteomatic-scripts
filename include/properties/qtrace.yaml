group: Proteomics/Quantitation/qTrace/1. Run

title: qTrace

description: >
   Perform petide quantitation on MS1 full or SIM scans. All peptides that
   are to be quantified must be specified either via the peptides parameter
   or via text or PSM list files. By default, peptides that are specified
   via PSM list files are only searched for in those spectra files which the
   peptides have been identified in.

type: processor

input:
  - key: spectraFiles
    label: spectra
    formats: [xml-mzdata, xml-mzdata-compressed, xml-mzxml, xml-mzxml-compressed, xml-mzml, xml-mzml-compressed]
    min: 1
  - key: psmFile
    label: PSM list
    formats: [csv]
  - key: peptideFiles
    label: peptide
    formats: [txt]

defaultOutputDirectory: spectraFiles

output:
  - key: qtraceCsv
    label: quantitation results
    format: csv
    filename: qtrace-results.csv
    default: yes
  - key: xhtmlReport
    label: XHTML results
    format: xhtml
    filename: qtrace-results.xhtml
    default: no

parameters:
  - key: peptides
    type: string
    label: Peptides
    description: Multiple peptides can be separated by spaces or commas.
    default: ''
  - key: excludeAminoAcids
    type: string
    default: ''
    label: Exclude amino acids
    description: "If you have reason to believe that proline containing peptides will mess up your quantitation, enter 'P' here."
  - key: label
    label: Label
    type: enum
    default: RP
    choices: [{R: 'heavy arginine'}, {RP: 'heavy arginine and proline'}, {N15: 'N15'}, 'RPKCN']
  - key: scanType
    label: Scans to analyze
    type: enum
    choices: [{sim: SIM scans only}, {all: All MS1 scans}, {full: Full scans only}]
    default: 'all'
  - key: isotopeCount
    label: Isotope count
    type: int
    default: 3
    min: 1
    max: 10
  - key: minCharge
    label: Minimum charge
    type: int
    default: 2
    min: 1
  - key: maxCharge
    label: Maximum charge
    type: int
    default: 3
    min: 1
  - key: minSnr
    label: Minimum SNR
    type: float
    default: 2.0
    min: 0.0
    step: 0.1
  - key: includeMassAccuracy
    label: Include mass accuracy
    type: float
    suffix: ppm
    default: 5.0
    min: 0.0
    step: 0.1
    description: Specify how accurately the Gauss fitted peaks must match to the target m/z values of the peptides. That is, enter the mass accuracy of your MS here.
  - key: excludeMassAccuracy
    label: Exclude mass accuracy
    type: float
    suffix: ppm
    default: 30.0
    min: 0.0
    step: 0.1
    description: This mass accuracy is used when peaks are tested for absence.
  - key: checkLightForbiddenPeaks
    label: Check light forbidden peaks
    type: flag
    default: yes
    description: Check whether light forbidden peaks are absent
  - key: checkHeavyForbiddenPeaks
    label: Check heavy forbidden peaks
    type: flag
    default: no
    description: Check whether heavy forbidden peaks are absent
  - key: searchAllInAll
    label: Search for all peptides in all spectra files
    type: flag
    default: false
    description: Try to quantify all peptides in all spectra files, even if peptides have not been identified in some spectra files.

needs:
  - ext.qtrace

filetracker:
  - dontMd5InputFiles: [spectraFiles]
